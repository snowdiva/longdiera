webpackJsonp([10,22],{224:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{self:this,showModal:!1,total:0,formInline:{status:1},handleModal:{},statusList:[{status:-1,name:"所有状态"},{status:0,name:"锁定"},{status:1,name:"正常"},{status:2,name:"删除"}],list:[]}},created:function(){this.initList()},watch:{$watch:"initList"},methods:{handleSubmit:function(){var t=this;this.$http.post("/admin_api/sort",this.formInline).then(function(a){0===a.body.error?(t.list=a.body.data.data,t.total=a.body.data.total):t.$Notice.error({title:"获取数据失败",desc:a.body.message})})},showNew:function(){this.handleModal={id:0,sort_id:0,hot_is:0,status:1},this.showModal=!0},showEdit:function(t){this.handleModal=this.list[t],this.showModal=!0},showDelete:function(t){var a=this;this.$Modal.confirm({title:"确定删除?",content:"那就删除吧~",loading:!0,onOk:function(){a.$http.post("/admin_api/sort/delete",{id:a.list[t].id}).then(function(s){0===s.body.error?(a.list[t]={},a.$Message.success(s.body.message),a.$Modal.remove()):a.$Notice.error({title:"请求失败",desc:s.body.message})})},cancelText:"取消"})},getList:function(t){var a=this;this.$http.post("/admin_api/sort?page="+t,this.formInline).then(function(t){0===t.body.error?a.list=t.body.data.data:a.$Notice.error({title:"获取数据失败",desc:t.body.message})})},postModal:function(){var t=this,a="/admin_api/sort/new";0!==this.handleModal.id&&(a="/admin_api/sort/edit"),this.$http.post(a,this.handleModal).then(function(a){if(0===a.body.error){if(t.$Message.success("对 "+t.handleModal.name+" 分类的操作以完成"),0===t.handleModal.id)t.handleModal={};else{var s=t;t.list.map(function(t,a){t.id===s.handleModal.id&&(s.list[a].status=parseInt(s.handleModal.status))})}t.$Modal.remove(),t.$router.go(0)}else t.$Notice.error({title:"请求失败",desc:a.body.message}),t.$Modal.loading=!1})},getParentName:function(t){if(0===t)return"-";for(var a=0;a<this.list.length;a++)if(t===this.list[a].id)return this.list[a].chinese_name},initList:function(){var t=this;this.$http.post("/admin_api/sort",this.formInline).then(function(a){0===a.body.error?(t.list=a.body.data.data,t.total=a.body.data.total):t.$Notice.error({title:"获取数据失败",desc:a.body.message})})}}}},246:function(t,a,s){a=t.exports=s(15)(),a.push([t.i,".text-danger{color:#ff5c33}","",{version:3,sources:["/Users/snowdiva/www/font/ldemanage/src/components/pages/Sort.vue"],names:[],mappings:"AACA,aACE,aAAe,CAChB",file:"Sort.vue",sourcesContent:["\n.text-danger {\n  color: #ff5c33;\n}\n"],sourceRoot:""}])},268:function(t,a,s){var e=s(246);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(16)("12b4d408",e,!0)},294:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"user"}},[s("div",{staticClass:"breadcrumb-box"},[s("Breadcrumb",[s("Breadcrumb-item",{attrs:{href:"/home"}},[t._v(" 首页 ")]),t._v(" "),s("Breadcrumb-item",[t._v(" 分类管理 ")])],1)],1),t._v(" "),s("Row",[s("Card",{staticClass:"table-box"},[s("i-col",{attrs:{span:"4"}},[s("i-button",{staticStyle:{float:"left"},attrs:{type:"primary"},nativeOn:{click:function(a){t.showNew(a)}}},[s("Icon",{attrs:{type:"plus-round"}}),t._v("\n          添加分类\n        ")],1)],1),t._v(" "),s("i-col",{attrs:{span:"20"}},[s("i-form",{staticStyle:{float:"right"},attrs:{model:t.formInline,inline:""}},[s("Form-item",[s("i-select",{staticStyle:{width:"100px"},model:{value:t.formInline.status,callback:function(a){t.formInline.status=a},expression:"formInline.status"}},t._l(t.statusList,function(a){return s("i-option",{attrs:{value:a.status}},[t._v(t._s(a.name))])}))],1),t._v(" "),s("Form-item",[s("i-button",{attrs:{type:"success"},nativeOn:{click:function(a){t.handleSubmit()}}},[t._v(" 搜索 ")])],1)],1)],1),t._v(" "),s("i-col",{staticStyle:{"margin-top":"15px"},attrs:{span:"24"}},[s("div",{staticClass:"ivu-table-wrapper"},[s("div",{staticClass:"ivu-table ivu-table-border ivu-table-stripe"},[s("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[s("thead",{staticClass:"ivu-table-header"},[s("tr",{staticClass:"ivu-table-row"},[s("th",{staticClass:"ivu-table-column-center",attrs:{width:"10%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("编号")])])]),t._v(" "),s("th",{staticClass:"ivu-table-column-center",attrs:{width:"20%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("全称(英文名)")])])]),t._v(" "),s("th",{staticClass:"ivu-table-column-center",attrs:{width:"10%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("简称")])])]),t._v(" "),s("th",{staticClass:"ivu-table-column-center",attrs:{width:"12%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("全称(中文名)")])])]),t._v(" "),s("th",{staticClass:"ivu-table-column-center",attrs:{width:"14%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("所属分类")])])]),t._v(" "),s("th",{staticClass:"ivu-table-column-center",attrs:{width:"10%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("是否热门")])])]),t._v(" "),s("th",{staticClass:"ivu-table-column-center",attrs:{width:"10%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("状态")])])]),t._v(" "),s("th",{staticClass:"ivu-table-column-center",attrs:{width:"14%"}},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v("操作")])])])])]),t._v(" "),s("tbody",{staticClass:"ivu-table-tbody"},t._l(t.list,function(a,e){return s("tr",{staticClass:"ivu-table-row"},[s("td",{staticClass:"ivu-table-column-center"},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v(t._s(a.id))])])]),t._v(" "),s("td",{},[s("div",{staticClass:"ivu-table-cell"},[s("div",[t._v(t._s(a.name))])])]),t._v(" "),s("td",{staticClass:"ivu-table-column-center"},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v(t._s(a.short_name))])])]),t._v(" "),s("td",{staticClass:"ivu-table-column-center"},[s("div",{staticClass:"ivu-table-cell"},[s("span",[t._v(t._s(a.chinese_name))])])]),t._v(" "),s("td",{staticClass:"ivu-table-column-center"},[s("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.getParentName(a.sort_id)))])]),t._v(" "),s("td",{staticClass:"ivu-table-column-center"},[s("div",{staticClass:"ivu-table-cell"},[1===parseInt(a.hot_is)?s("span",{staticClass:"text-danger"},[t._v("热门")]):s("span",[t._v("普通")])])]),t._v(" "),s("td",{staticClass:"ivu-table-column-center"},[s("div",{staticClass:"ivu-table-cell"},[1===parseInt(a.status)?s("span",{staticClass:"text-success"},[t._v("正常")]):0===parseInt(a.status)?s("span",{staticClass:"text-danger"},[t._v("锁定")]):s("span",{staticClass:"text-grey"},[t._v("删除")])])]),t._v(" "),s("td",{staticClass:"ivu-table-column-center"},[s("div",{staticClass:"ivu-table-cell"},[s("div",[s("button",{staticClass:"ivu-btn ivu-btn-info ivu-btn-small",attrs:{type:"button"},on:{click:function(a){t.showEdit(e)}}},[s("span",[t._v("修改")])]),t._v(" "),s("button",{staticClass:"ivu-btn ivu-btn-error ivu-btn-small",attrs:{type:"button"},on:{click:function(a){t.showDelete(e)}}},[2===parseInt(a.status)?s("span",[t._v("清除")]):s("span",[t._v("删除")])])])])])])}))])])])]),t._v(" "),s("div",{staticClass:"table-page"},[s("Page",{attrs:{total:t.total,"show-elevator":""},on:{"on-change":t.getList}})],1)],1)],1),t._v(" "),s("Modal",{attrs:{title:"分类操作","mask-closable":!1,loading:!0,width:"720"},on:{"on-ok":t.postModal},model:{value:t.showModal,callback:function(a){t.showModal=a},expression:"showModal"}},[s("Row",[s("i-col",{attrs:{span:"20",offset:"2"}},[s("i-form",{attrs:{"label-width":100},model:{value:t.handleModal,callback:function(a){t.handleModal=a},expression:"handleModal"}},[s("Form-item",{directives:[{name:"show",rawName:"v-show",value:0!==t.handleModal.id,expression:"handleModal.id !== 0"}],attrs:{label:"分类编号"}},[s("i-input",{attrs:{disabled:""},model:{value:t.handleModal.id,callback:function(a){t.handleModal.id=a},expression:"handleModal.id"}})],1),t._v(" "),s("Form-item",{attrs:{label:"分类英文全称"}},[s("i-input",{model:{value:t.handleModal.name,callback:function(a){t.handleModal.name=a},expression:"handleModal.name"}})],1),t._v(" "),s("Form-item",{attrs:{label:"简称"}},[s("i-input",{attrs:{placeholder:"尽量适应英文"},model:{value:t.handleModal.short_name,callback:function(a){t.handleModal.short_name=a},expression:"handleModal.short_name"}})],1),t._v(" "),s("Form-item",{attrs:{label:"中文全称"}},[s("i-input",{attrs:{placeholder:"尽在后台显示"},model:{value:t.handleModal.chinese_name,callback:function(a){t.handleModal.chinese_name=a},expression:"handleModal.chinese_name"}})],1),t._v(" "),s("Form-item",{attrs:{label:"所属分类"}},[s("i-select",{model:{value:t.handleModal.sort_id,callback:function(a){t.handleModal.sort_id=a},expression:"handleModal.sort_id"}},[s("i-option",{attrs:{value:0}},[t._v(" - ")]),t._v(" "),t._l(t.list,function(a){return s("i-option",{attrs:{value:a.id}},[t._v(t._s(a.chinese_name))])})],2)],1),t._v(" "),s("Form-item",{attrs:{label:"热门分类"}},[s("Radio-group",{staticStyle:{float:"left"},attrs:{type:"button",size:"small"},model:{value:t.handleModal.hot_is,callback:function(a){t.handleModal.hot_is=a},expression:"handleModal.hot_is"}},[s("Radio",{attrs:{label:"1"}},[t._v("热门")]),t._v(" "),s("Radio",{attrs:{label:"0"}},[t._v("普通")])],1)],1),t._v(" "),s("Form-item",{attrs:{label:"状态"}},[s("Radio-group",{staticStyle:{float:"left"},attrs:{type:"button",size:"small"},model:{value:t.handleModal.status,callback:function(a){t.handleModal.status=a},expression:"handleModal.status"}},[s("Radio",{attrs:{label:"1"}},[t._v("正常")]),t._v(" "),s("Radio",{attrs:{label:"0"}},[t._v("锁定")]),t._v(" "),2===parseInt(t.handleModal.status)?s("Radio",{attrs:{label:"2"}},[t._v("删除")]):t._e()],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}},34:function(t,a,s){s(268);var e=s(6)(s(224),s(294),null,null);t.exports=e.exports}});
//# sourceMappingURL=10.71770173421a90021ca7.js.map